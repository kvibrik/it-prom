(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-40f113bd"],{"18d6":function(e,t,s){"use strict";s.r(t);var n=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("BContainer",[s("BRow",{staticClass:"bg-secondary p-3 mt-5 text-white"},[s("BCol",{attrs:{cols:"3"}},[e._v("ФИО")]),s("BCol",{attrs:{cols:"3"}},[e._v("Профессия")]),s("BCol",{attrs:{cols:"2"}},[e._v("Отдел")]),s("BCol",{attrs:{cols:"3"}},[e._v("Примечание")]),s("BCol",{attrs:{cols:"1"}})],1),e._l(e.staff,(function(t,n,o){return s("div",{key:o},[s("User",{attrs:{user:t,dep:e.departments,prof:e.professions},on:{removeUser:e.onRemoveUser,openModal:e.onOpenModal}})],1)})),e.openModal?s("UserModal",{attrs:{user:e.user,prof:e.professions,dep:e.departments},on:{changeUser:e.onChangeUser,cancel:e.closeModal}}):e._e(),s("BButton",{staticClass:"mt-4",attrs:{variant:"success"},on:{click:e.onOpenModal}},[e._v("Добавить сотрудника")])],2)},o=[],r=(s("96cf"),s("1da1")),a=s("5530"),l=s("2f62"),c=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("BRow",{staticClass:"pt-3 pb-3 border"},[s("BCol",{attrs:{cols:"3"}},[e._v(e._s(e.getFullName))]),s("BCol",{attrs:{cols:"3"}},[e._v(e._s(e.getProfession))]),s("BCol",{attrs:{cols:"2"}},[e._v(e._s(e.getDepartment))]),s("BCol",{attrs:{cols:"3"}},[e._v(e._s(e.user.note))]),s("BCol",{staticClass:"h5",attrs:{cols:"1"}},[s("BIconstack",{directives:[{name:"b-modal",rawName:"v-b-modal.user-modal",modifiers:{"user-modal":!0}}],staticClass:"pointer",attrs:{variant:"success"},on:{click:e.emitOpenModal}},[s("BIcon",{attrs:{stacked:"",icon:"pencil"}}),s("BIcon",{attrs:{stacked:"",icon:"square",scale:"1.2"}})],1),s("BIcon",{staticClass:"ml-3 pointer",attrs:{icon:"x-circle",variant:"danger"},on:{click:e.emitRemoveEvent}})],1)],1)},i=[],u=(s("99af"),s("b0c0"),{name:"User",props:["user","dep","prof"],methods:{emitRemoveEvent:function(){this.$emit("removeUser",{id:this.user.id})},emitOpenModal:function(){this.$emit("openModal",{id:this.user.id})}},computed:{getFullName:function(){return"".concat(this.user.name.lastName," ").concat(this.user.name.firstName," ").concat(this.user.name.secondName)},getProfession:function(){var e=this.user.professionId;return e?this.prof[e].name:""},getDepartment:function(){var e=this.user.departmentId;return e?this.dep[e].name:""}}}),d=u,f=s("2877"),m=Object(f["a"])(d,c,i,!1,null,"2573baf8",null),p=m.exports,b=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"modal"},[s("div",{staticClass:"modal-body"},[s("BForm",{staticClass:"modal-content",on:{submit:e.onSubmit}},[s("BFormGroup",{attrs:{"label-cols-sm":"4","label-cols-lg":"3",label:"Фамилия","label-for":"user-last"}},[s("BFormInput",{attrs:{id:"user-last",required:""},model:{value:e.userInfo.name.lastName,callback:function(t){e.$set(e.userInfo.name,"lastName",t)},expression:"userInfo.name.lastName"}})],1),s("BFormGroup",{attrs:{"label-cols-sm":"4","label-cols-lg":"3",label:"Имя","label-for":"user-firstname"}},[s("BFormInput",{attrs:{id:"user-firstname",required:""},model:{value:e.userInfo.name.firstName,callback:function(t){e.$set(e.userInfo.name,"firstName",t)},expression:"userInfo.name.firstName"}})],1),s("BFormGroup",{attrs:{"label-cols-sm":"4","label-cols-lg":"3",label:"Отчество","label-for":"user-secondname"}},[s("BFormInput",{attrs:{id:"user-secondname",required:""},model:{value:e.userInfo.name.secondName,callback:function(t){e.$set(e.userInfo.name,"secondName",t)},expression:"userInfo.name.secondName"}})],1),s("BFormGroup",{attrs:{"label-cols-sm":"4","label-cols-lg":"3",label:"Профессия","label-for":"user-prof"}},[s("BFormSelect",{attrs:{id:"user-prof",options:e.professions},on:{change:e.onProfessionChange},model:{value:e.selectedProf,callback:function(t){e.selectedProf=t},expression:"selectedProf"}})],1),s("BFormGroup",{attrs:{"label-cols-sm":"4","label-cols-lg":"3",label:"Отдел","label-for":"user-dep"}},[s("BFormSelect",{attrs:{id:"user-dep",options:e.departments},on:{change:e.onDepartmentChange},model:{value:e.selectedDep,callback:function(t){e.selectedDep=t},expression:"selectedDep"}})],1),s("BFormGroup",{attrs:{"label-cols-sm":"4","label-cols-lg":"3",label:"Примечание","label-for":"user-note"}},[s("BFormInput",{attrs:{id:"user-note"},model:{value:e.userInfo.note,callback:function(t){e.$set(e.userInfo,"note",t)},expression:"userInfo.note"}})],1),s("b-button",{staticClass:"mb-2",attrs:{type:"submit",variant:"primary"}},[e._v("Сохранить")]),s("b-button",{attrs:{variant:"secondary"},on:{click:e.onCancel}},[e._v("Отмена")])],1)],1)])},h=[],v=(s("d81d"),s("07ac"),{name:"UserModal",props:{user:{type:Object},prof:{},dep:{}},data:function(){return{userInfo:{},selectedProf:null,selectedDep:null,professions:[],departments:[]}},methods:{onSubmit:function(e){e.preventDefault(),this.$emit("changeUser",{id:this.userInfo.id,user:this.userInfo})},onCancel:function(){this.$emit("cancel")},onProfessionChange:function(){this.userInfo.professionId=this.selectedProf},onDepartmentChange:function(){this.userInfo.departmentId=this.selectedDep}},computed:{getDepartments:function(){return this.dep[this.user.departmentId].name}},beforeMount:function(){var e=JSON.parse(JSON.stringify(this.user)),t=this.prof[e.professionId]||"",s=Object.values(this.prof),n=this.dep[e.departmentId]||"",o=Object.values(this.dep);this.userInfo=e,this.selectedProf=t.id,this.professions=s.map((function(e){return{value:e.id,text:e.name}})),this.selectedDep=n.id,this.departments=o.map((function(e){return{value:e.id,text:e.name}}))}}),g=v,I=(s("1fb1"),Object(f["a"])(g,b,h,!1,null,"091dde0f",null)),B=I.exports,C={name:"Staff",components:{User:p,UserModal:B},data:function(){return{user:{id:Math.random(),name:{firstName:"",secondName:"",lastName:""},professionId:"",departmentId:"",note:""},openModal:!1}},computed:Object(a["a"])(Object(a["a"])(Object(a["a"])({},Object(l["c"])("staff",["staff"])),Object(l["c"])("departments",["departments"])),Object(l["c"])("professions",["professions"])),methods:Object(a["a"])(Object(a["a"])({},Object(l["b"])("staff",["removeUser","changeUser"])),{},{onRemoveUser:function(e){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function s(){var n,o;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return n=e.id,s.next=3,t.$bvModal.msgBoxConfirm("Действительно удалить сотрудника?");case 3:o=s.sent,o&&t.removeUser(n);case 5:case"end":return s.stop()}}),s)})))()},onOpenModal:function(e){var t=e.id;if(t){var s=this.staff[t];this.user=s}this.openModal=!0},onChangeUser:function(e){this.changeUser(e),this.closeModal()},closeModal:function(){this.openModal=!1,this.user={id:Math.random(),name:{firstName:"",secondName:"",lastName:""},professionId:"",departmentId:"",note:""}}})},N=C,O=(s("7e6a"),Object(f["a"])(N,n,o,!1,null,"68780cf7",null));t["default"]=O.exports},"1fb1":function(e,t,s){"use strict";var n=s("dae8"),o=s.n(n);o.a},"43d4":function(e,t,s){},"7e6a":function(e,t,s){"use strict";var n=s("43d4"),o=s.n(n);o.a},"99af":function(e,t,s){"use strict";var n=s("23e7"),o=s("d039"),r=s("e8b5"),a=s("861d"),l=s("7b0b"),c=s("50c4"),i=s("8418"),u=s("65f0"),d=s("1dde"),f=s("b622"),m=s("2d00"),p=f("isConcatSpreadable"),b=9007199254740991,h="Maximum allowed index exceeded",v=m>=51||!o((function(){var e=[];return e[p]=!1,e.concat()[0]!==e})),g=d("concat"),I=function(e){if(!a(e))return!1;var t=e[p];return void 0!==t?!!t:r(e)},B=!v||!g;n({target:"Array",proto:!0,forced:B},{concat:function(e){var t,s,n,o,r,a=l(this),d=u(a,0),f=0;for(t=-1,n=arguments.length;t<n;t++)if(r=-1===t?a:arguments[t],I(r)){if(o=c(r.length),f+o>b)throw TypeError(h);for(s=0;s<o;s++,f++)s in r&&i(d,f,r[s])}else{if(f>=b)throw TypeError(h);i(d,f++,r)}return d.length=f,d}})},b0c0:function(e,t,s){var n=s("83ab"),o=s("9bf2").f,r=Function.prototype,a=r.toString,l=/^\s*function ([^ (]*)/,c="name";n&&!(c in r)&&o(r,c,{configurable:!0,get:function(){try{return a.call(this).match(l)[1]}catch(e){return""}}})},d81d:function(e,t,s){"use strict";var n=s("23e7"),o=s("b727").map,r=s("1dde"),a=s("ae40"),l=r("map"),c=a("map");n({target:"Array",proto:!0,forced:!l||!c},{map:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0)}})},dae8:function(e,t,s){}}]);
//# sourceMappingURL=chunk-40f113bd.b01e592c.js.map